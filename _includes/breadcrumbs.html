{%- comment -%}
  Generates BreadcrumbList JSON-LD structured data for pages under /travels/
  following Google's guidelines:
  https://developers.google.com/search/docs/appearance/structured-data/breadcrumb

  Display names are looked up from _data/breadcrumb_names.yml.
  The last item omits "item" (Google uses the containing page URL).
  Only outputs when there are at least 2 breadcrumb levels.
{%- endcomment -%}
{%- if page.url contains '/travels/' -%}
{%- assign clean_url = page.url | replace: '/index.html', '' | replace: '.html', '' -%}
{%- assign url_parts = clean_url | split: '/' -%}
{%- assign part_count = 0 -%}
{%- for segment in url_parts -%}
  {%- if segment != "" -%}{%- assign part_count = part_count | plus: 1 -%}{%- endif -%}
{%- endfor -%}
{%- if part_count >= 2 %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {%- assign crumb_path = "" -%}
    {%- assign position = 0 -%}
    {%- for segment in url_parts -%}
      {%- if segment != "" -%}
        {%- assign position = position | plus: 1 -%}
        {%- assign crumb_path = crumb_path | append: "/" | append: segment -%}
        {%- assign crumb_name = site.data.breadcrumb_names[segment] | default: segment -%}
        {%- if position == part_count %}
    {
      "@type": "ListItem",
      "position": {{ position }},
      "name": "{{ crumb_name }}"
    }
        {%- else %}
    {
      "@type": "ListItem",
      "position": {{ position }},
      "name": "{{ crumb_name }}",
      "item": "{{ site.url }}{{ crumb_path }}"
    },
        {%- endif -%}
      {%- endif -%}
    {%- endfor %}
  ]
}
</script>
{%- endif -%}
{%- endif -%}
